# Анализ поведения пользователей в EdTech

## Условия

1. **A/B–тестирование**

   Одной из основных задач аналитика в нашей команде является корректное проведение экспериментов. Для этого мы применяем метод A/B-тестирования. В ходе тестирования одной гипотезы целевой группе была предложена новая механика оплаты услуг на сайте, у контрольной группы оставалась базовая механика. Необходимо проанализировать итоги эксперимента и сделать вывод, стоит ли запускать новую механику оплаты на всех пользователей.
3. **SQL**
- Образовательные курсы состоят из различных уроков, каждый из которых состоит из нескольких маленьких заданий. Каждое такое маленькое задание называется "горошиной". Назовём очень усердным учеником того пользователя, который хотя бы раз за текущий месяц правильно решил 20 горошин. Необходимо определить количество очень усердных студентов.
- Образовательная платформа предлагает пройти студентам курсы по модели trial: студент может решить бесплатно лишь 30 горошин в день. Для неограниченного количества заданий в определенной дисциплине студенту необходимо приобрести полный доступ. Команда провела эксперимент, где был протестирован новый экран оплаты. Необходимо в одном запросе выгрузить информацию по метрикам.

## Задачи

1. **A/B–тестирование**

   Ответить на следующие вопросы:
   - На какие метрики стоит смотреть в ходе анализа и почему?
   - Имеются ли различия в показателях и с чем они могут быть связаны?
   - Являются ли эти различия статистически значимыми?
   - Стоит ли запускать новую механику на всех пользователей?
2. **SQL**
- Написать оптимальный запрос, который даст информацию о количестве очень усердных студентов. Под усердным студентом мы понимаем студента, который правильно решил 20 задач за текущий месяц.
- В одном запросе выгрузить следующую информацию о группах пользователей: ARPU, ARPAU, CR в покупку, CR активного пользователя в покупку, CR пользователя из активности по математике (`subject = 'Math'`) в покупку курса по математике<br>
ARPU считается относительно всех пользователей, попавших в группы.<br>
Активным считается пользователь, за все время решивший больше 10 задач правильно в любых дисциплинах.<br>
Активным по математике считается пользователь, за все время решивший 2 или больше задач правильно по математике.<br>
Все данные находятся в табличном виде в ClickHouse.
3. **Python**
- Реализовать функцию, которая будет автоматически подгружать информацию из дополнительного файла `groups_add.csv` (заголовки могут отличаться) и на основании дополнительных параметров пересчитывать метрики.
- Реализовать функцию, которая будет строить графики по получаемым метрикам.

## Описание данных

- `groups.csv` – файл с информацией о принадлежности пользователя к контрольной или экспериментальной группе (А – контроль, B – целевая группа)
- `groups_add.csv` – дополнительный файл с пользователями, который прислали спустя 2 дня после передачи данных
- `active_studs.csv` – файл с информацией о пользователях, которые зашли на платформу в дни проведения эксперимента
- `checks.csv` – файл с информацией об оплатах пользователей в дни проведения эксперимента
- `default.peas`:
```
Название атрибута Тип атрибута Смысловое значение
st_id	          int          ID ученика
timest            timestamp    Время решения карточки
correct           bool         Правильно ли решена горошина?
subject           text         Дисциплина, в которой находится горошина
```
- `default.studs`:
```
Название атрибута Тип атрибута Смысловое значение
st_id	          int          ID ученика
test_grp          text         Метка ученика в данном эксперименте
```
- `default.final_project_check`:
```
Название атрибута Тип атрибута Смысловое значение
st_id	          int          ID ученика
sale_time         timestamp    Время покупки
money             int          Цена, по которой приобрели данный курс
subject           text         Дисциплина курса
```

## Стек

Python (pandas, pandahouse, seaborn, matplotlib, scipy.stats, pingouin, requests, urllib.parse, warnings), SQL (ClickHouse), A/B-тестирование

## Результаты

- Выполнила EDA, в результате которого, в частности, выявила неактивных, но оплативших юзеров
- Определила метрики, на которые смотрела в ходе анализа (CR, ARPU и ARPPU)
- Проанализировала итоги A/B-теста и сделала вывод о том, что можно применить новую механику оплаты услуг на сайте. Но перед тем, как выкатывать фичу на всех юзеров, уточнила бы еще доп. информацию
- Написала SQL-скрипт для расчета метрик одним запросом, также выявила кол-во очень усердных студентов
- Реализовала функции с помощью Python: для расчета метрик и для графиков по этим метрикам
